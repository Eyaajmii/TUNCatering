<div class="container mt-4">
  <aside class="filters">
    <h2>Filtres</h2>
    
    <div class="filter-group">
      <h3>Statut</h3>
      <label *ngFor="let status of statusFilters">
        <input type="checkbox" [(ngModel)]="status.selected">
        {{ status.name }} ({{ status.count }})
      </label>
    </div>

    <div class="filter-group">
      <h3>Date de commande</h3>
      <input type="date" [(ngModel)]="selectedDate">
    </div>
  </aside>
  <div class="content">
  <h2 class="commande-title">Suivi de mes Commandes</h2>
  <div *ngIf="commandes && commandes.length === 0" class="mt-3">
    Aucune commande trouvée.
  </div>
  <div *ngIf="filtreCommande  && filtreCommande .length === 0" class="mt-3">
    Aucune commande trouvée avec les filtres.
  </div>
  <div *ngIf="filtreCommande  && filtreCommande .length > 0" class="mt-3">
    <div *ngFor="let commande of filtreCommande " class="card my-2 p-3 shadow-sm">
      <div><strong>N° commande :</strong> {{ commande.numeroCommande}}</div>
      <div><strong>N° vol :</strong> {{ commande.vol?.numVol}}</div>
      <div>
        <strong>Statut :</strong> 
        <span [ngClass]="{
          'text-warning': commande.Statut === 'en attente',
          'text-success': commande.Statut === 'prêt',
          'text-danger': commande.Statut === 'annulé'
        }">
          {{ commande.Statut }}
        </span>
        <span *ngIf="commande.Statut === 'annulé' && commande.motifAnnulation" class="text-danger fst-italic">
          Motif : {{ commande.motifAnnulation }}
        </span>
      </div>
      <div *ngIf="commande.menu">
        <strong>Menu :</strong> {{ commande.menu.nom }}
        <ul class="plat-list">
          <strong>Liste des plats :</strong> 
          <li *ngFor="let plat of commande.plats">{{ plat.nom }}</li>
        </ul>
      </div>
      <div *ngIf="!commande.menu && commande.plats && commande.plats.length > 0">
        <p><strong>Plats :</strong></p>
        <ul>
          <li *ngFor="let plat of commande.plats">{{ plat.nom }}</li>
        </ul>
      </div>
      <button class="btn btn-warning btn-sm" (click)="modifier(commande._id)" [disabled]="commande.Statut !== 'en attente'">Modifier</button>
      <button class="btn btn-danger btn-sm" (click)="annuler(commande._id)" [disabled]="commande.Statut !== 'en attente'">Annuler</button>
    </div>
  </div>
  </div>
</div>
