<div class="container">
    <h2>Commandes en temps réel</h2>

    <div class="connection-status" [class.connected]="connectionStatus" [class.disconnected]="!connectionStatus">
        {{ connectionStatus ? 'Connecté' : 'Déconnecté' }}
    </div>

    <div *ngIf="error" class="alert alert-danger">
        {{ error }}
    </div>

    <div *ngIf="loading" class="loading-indicator">
        Chargement des commandes...
    </div>

    <div class="filters">
        <select [(ngModel)]="filtres.statut" class="form-control">
            <option value="tous">Toutes les commandes</option>
            <option *ngFor="let status of availableStatuses" [value]="status.value">
                {{ status.display }}
            </option>
        </select>
    </div>

    <div class="commandes-list" *ngIf="!loading && !error">
        <div *ngFor="let commande of filteredCommands" class="commande-card">
            <h3>Commande #{{ formatId(commande._id) }}</h3>
            <p>Date et heure: {{ formatDateTime(commande.dateCommnade) }}</p>            <p>Statut:
                <span [class]="getStatusClass(commande.Statut)">
                    {{ getStatusDisplayText(commande.Statut) }}
                </span>
            </p>
            <div class="plats-list">
                <h4>Plats:</h4>
                <ul>
                    <li *ngFor="let plat of commande.plats">
                        <span class="plat-nom">{{ plat.nom }}</span>
                        <span class="plat-type">{{ plat.typePlat }}</span>
                        <span class="plat-prix">{{ plat. prix | currency:'TND':'symbol':'1.3-3'  }}</span>
                    </li>
                </ul>
            </div>

            <select [(ngModel)]="commande.Statut"
                    (change)="changerStatut(commande._id, commande.Statut)"
                    class="form-control">
                <option *ngFor="let status of availableStatuses" [value]="status.value">
                    {{ status.display }}
                </option>
            </select>
        </div>
    </div>
</div>